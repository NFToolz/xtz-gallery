{"version":3,"sources":["components/image.js","components/x-directory.js","components/gltf.js","components/video.js","app.js","index.js"],"names":["Image","url","render","useState","src","setSrc","rendering","setRendering","useEffect","style","width","height","objectFit","imageRendering","XDirectory","border","GLTF","autoplay","auto-rotate","interaction-prompt","Video","autoPlay","loop","muted","playsInline","App","current","setCurrent","address","setAddress","tokens","setTokens","getTokens","offset","Promise","resolve","reject","fetch","then","response","ok","status","json","data","concat","balances","length","total","catch","replaceIPFS","alt","replace","window","prompt","indexOf","console","log","position","top","right","bottom","left","object","formats","mimeType","uri","renderObject","cursor","onClick","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.53da352a.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nexport default function Image({ url, render = 'pixelated' }) {\n  const [src, setSrc] = useState(url);\n  const [rendering, setRendering] = useState(render);\n\n  useEffect(() => {\n    setSrc(url);\n    setRendering(rendering);\n  }, [url, rendering]);\n\n  return (\n    <img\n      style={{\n        width: '100%',\n        height: '100%',\n        objectFit: 'contain',\n        imageRendering: rendering,\n      }}\n      src={src}\n    />\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nexport default function XDirectory({ url }) {\n  const [src, setSrc] = useState(url);\n\n  useEffect(() => {\n    setSrc(url);\n  }, [url]);\n\n  return (\n    <iframe\n      style={{\n        width: '100%',\n        height: '100%',\n        border: 0,\n      }}\n      src={src}\n    />\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nexport default function GLTF({ url }) {\n  const [src, setSrc] = useState(url);\n\n  useEffect(() => {\n    setSrc(url);\n  }, [url]);\n\n  return (\n    <model-viewer\n      style={{\n        width: '100%',\n        height: '100%',\n      }}\n      autoplay\n      auto-rotate\n      interaction-prompt=\"none\"\n      src={src}\n    />\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nexport default function Video({ url }) {\n  const [src, setSrc] = useState(url);\n\n  useEffect(() => {\n    setSrc(url);\n  }, [url]);\n\n  return (\n    <video\n      style={{\n        width: '100%',\n        height: '100%',\n      }}\n      autoPlay\n      loop\n      muted\n      playsInline\n      src={src}\n    />\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport Image from './components/image';\nimport XDirectory from './components/x-directory';\nimport GLTF from './components/gltf';\nimport Video from './components/video';\nimport './main.css';\n\nexport default function App() {\n  const [current, setCurrent] = useState(null);\n  const [address, setAddress] = useState(null);\n  const [tokens, setTokens] = useState([]);\n\n  useEffect(() => {\n    setAddress(window.prompt('Tezos address?'));\n  }, []);\n\n  useEffect(() => {\n    if (address) {\n      getTokens(address).then((tokens) => {\n        setTokens(tokens);\n      });\n    }\n  }, [address]);\n\n  useEffect(() => {\n    if (current) {\n      setCurrent(tokens[(tokens.indexOf(current) + 1) % tokens.length])\n    } else {\n      setCurrent(tokens[0])\n    }\n  }, [tokens]);\n\n  useEffect(() => {\n    console.log(current);\n  }, [current]);\n\n  function getTokens(address, offset = 0, tokens = []) {\n    return new Promise((resolve, reject) => fetch(`https://api.better-call.dev/v1/account/mainnet/${address}/token_balances?size=50&offset=${offset}`)\n      .then((response) => {\n        if (!response.ok) {\n          throw `HTTP error ${response.status}`;\n        }\n        response.json().then((data) => {\n          tokens = tokens.concat(data.balances);\n\n          if (tokens.length < data.total) {\n            getTokens(address, tokens.length, tokens).then(resolve).catch(reject);\n          } else {\n            resolve(tokens);\n          }\n        }).catch(reject)\n      }).catch(reject)\n    );\n  }\n\n  function replaceIPFS(url, alt) {\n    if (alt) {\n      return (url) ? url.replace('ipfs://', 'https://ipfs.io/ipfs/') : null;\n    } else {\n      return (url) ? url.replace('ipfs://', 'https://cloudflare-ipfs.com/ipfs/') : null;\n    }\n  }\n\n  function renderObject(object) {\n    switch (object.formats[0].mimeType) {\n      case 'image/jpeg':\n      case 'image/png':\n      case 'image/gif':\n        return <Image url={replaceIPFS(current.formats[0].uri)} />\n        break;\n      case 'application/x-directory':\n      case 'image/svg+xml':\n        return <XDirectory url={replaceIPFS(current.formats[0].uri)} />\n        break;\n      case 'model/gltf-binary':\n      case 'model/gltf+json':\n        return <GLTF url={replaceIPFS(current.formats[0].uri)} />\n        break;\n      case 'video/mp4':\n      case 'video/ogg':\n        return <Video url={replaceIPFS(current.formats[0].uri, true)} />\n        break;\n    }\n  }\n\n  return (\n    <div>\n      {current && <div\n        style= {{\n          position: 'absolute',\n          top: 0,\n          right: 0,\n          bottom: 0,\n          left: 0,\n        }}\n      >\n        {renderObject(current)}\n      </div>}\n      <div\n        style= {{\n          position: 'absolute',\n          top: 0,\n          right: 0,\n          bottom: 0,\n          left: '80%',\n          cursor: 'e-resize',\n        }}\n        onClick={() => {\n          setCurrent(tokens[(tokens.indexOf(current) + 1) % tokens.length])\n        }}\n      />\n      <div\n        style= {{\n          position: 'absolute',\n          top: 0,\n          right: '80%',\n          bottom: 0,\n          left: 0,\n          cursor: 'w-resize',\n        }}\n        onClick={() => {\n          setCurrent(tokens[(tokens.indexOf(current) - 1) % tokens.length])\n        }}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}